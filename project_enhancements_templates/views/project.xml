<odoo>
  <!-- Form View -->
  <record model="ir.ui.view" id="project_enhancement_template_view_form">
    <field name="name">project.enhancement.template.form</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.edit_project"/>
    <field name="type">form</field>
    <field name="arch" type="xml">
      <data>
        <field name="user_id" position="replace">
          <field name="user_id"
                 string="Project Manager"
                 attrs="{'readonly':[('active','=',False)], 'invisible':[('is_template','=',True)]}"/>
        </field>
        <field name="partner_id" position="replace">
          <field name="partner_id"
                 attrs="{'invisible':[('is_template','=',True)]}"/>
        </field>
        <xpath expr="//page[@name='emails']" position="replace">
          <page name="emails" string="Emails" attrs="{'invisible': ['|',('alias_domain', '=', False),('is_template', '=', True)]}">
            <group name="group_alias">
              <label for="alias_name" string="Email Alias"/>
              <div name="alias_def">
                <field name="alias_id" class="oe_read_only oe_inline" string="Email Alias" required="0"/>
                <div class="oe_edit_only oe_inline" name="edit_alias" style="display: inline;">
                  <field name="alias_name" class="oe_inline"/>@<field name="alias_domain" class="oe_inline" readonly="1"/>
                </div>
              </div>
              <field name="alias_contact" class="oe_inline oe_edit_only" string="Accept Emails From"/>
            </group>
          </page>
        </xpath>
        <xpath expr="//header" position="inside">
          <button string="Create Project From Template"
                  type="object"
                  name="create_project_from_template"
                  class="oe_highlight"
                  attrs="{'invisible': [('is_template', '=', False)]}"/>
        </xpath>
        <xpath expr="//notebook" position="after">
          <footer>
            <label for="is_template" string="Is Template?"/>
            <field name="is_template"/>
          </footer>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Kanban View -->
  <record model="ir.ui.view" id="project_enhancement_template_view_kanban">
    <field name="name">project.enhancement.template.kanban</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.view_project_kanban"/>
    <field name="arch" type="xml">
      <data>
        <xpath expr="//div[@class='oe_kanban_content']" position="inside">
          <div>
            <field name="is_template"
                   invisible="1"/>
            <a type="button">
              <button name="create_project_from_template" type="object" class="oe_highlight" attrs="{'invisible': [('is_template', '=', False)]}">
                <span>Create Project From Template</span>
              </button>
            </a>
          </div>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Search View -->
  <record model="ir.ui.view" id="project_enhancement_template_view_search">
    <field name="name">project.enhancements.template.filter</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.view_project_project_filter"/>
    <field name="arch" type="xml">
      <filter name="inactive" position="before">
        <filter string="Templates"
                name="templates"
                domain="[('is_template', '=', True)]"/>
        <filter string="Non-Templates"
                name="projects"
                domain="[('is_template', '=', False)]"/>
        <separator/>
      </filter>

    </field>
  </record>

  <!-- actions opening views on models -->
  <record model="ir.actions.act_window" id="project_template_action_window">
    <field name="name">Templates</field>
    <field name="res_model">project.project</field>
    <field name="view_id" ref="project.view_project_kanban"/>
    <field name="view_mode">kanban,form,tree</field>
    <field name="context">{"search_default_templates":1, "search_default_not_closed":1}</field>
  </record>

  <record model="ir.actions.act_window" id="project.open_view_project_all">
    <field name="name">Projects</field>
    <field name="res_model">project.project</field>
    <field name="view_id" ref="project.view_project_kanban"/>
    <field name="view_mode">kanban,form,tree</field>
    <field name="context">{"search_default_projects":1, "search_default_not_closed":1}</field>
  </record>

  <!-- Menu Items -->
  <menuitem
    name="Templates"
    id="project_template_menu"
    parent="project.menu_main_pm"
    sequence="1"
    action="project_template_action_window"/>

</odoo>
