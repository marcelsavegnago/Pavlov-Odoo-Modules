<odoo>
  <!-- List View-->
  <record model="ir.ui.view" id="project_enhancement_scrum_view_list">
    <field name="name">project.enhancement.scrum.tree</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.view_project"/>
    <field name="type">tree</field>
    <field name="field_parent">child_ids</field>
    <field name="arch" type="xml">
      <field name="user_id" position="after">
        <field name="sprints"/>
        <field name="epics"/>
      </field>
    </field>
  </record>

  <!-- Form View -->
  <record model="ir.ui.view" id="project_enhancement_scrum_view_form">
    <field name="name">project.enhancement.scrum.form</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.edit_project"/>
    <field name="type">form</field>
    <field name="arch" type="xml">
      <data>
        <field name="label_tasks" position="replace">
          <field name="label_tasks" required="1"/>
        </field>
        <xpath expr="//div[@name='options_active']" position="inside">
          <div>
            <field name="use_scrum" class="oe_inline" string="Use scrum"/>
            <label for="use_scrum"/>
          </div>
        </xpath>
        <xpath expr="//group[@name='misc']" position="before">
          <group string="Scrum Settings" colspan="2" col="4" attrs="{'invisible':[('use_scrum','=', False)]}">
            <field name="next_task_number"/>
            <field name="allow_auto_forecast"
                   attrs="{'invisible':[('allow_forecast','=', False)]}"/>
          </group>
        </xpath>
        <xpath expr="//page[@name='settings']" position="after">
          <page name="epics" string="Epics" attrs="{'invisible':[('use_scrum','=', False)]}">
            <group>
              <field name="epics"
                     context="{'default_project_id': active_id}"
                     nolabel="1"
                     domain="[('project_id', '=', active_id)]"/>
            </group>
          </page>
          <page name="sprints" string="Sprints" attrs="{'invisible':[('use_scrum','=', False)]}">
            <group>
              <field name="sprints"
                     nolabel="1"
                     domain="[('project_id', '=', active_id)]"
                     readonly="1"/>
            </group>
            <a>*Sprints are managed via the 'Scrum/All Sprints' menu</a>
          </page>
          <page name="releases" string="Releases" attrs="{'invisible':[('use_scrum','=', False)]}">
            <group>
              <field name="releases"
                     context="{'project_id': active_id}"
                     nolabel="1"
                     domain="[('project_id', '=', active_id)]"/>
            </group>
          </page>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Simplified Form View -->
  <record model="ir.ui.view" id="view_enhancement_edit_project_simple">
    <field name="name">project.enhancement.scrum.simpleform</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.project_project_view_form_simplified"/>
    <field name="type">form</field>
    <field name="arch" type="xml">
      <data>
        <field name="user_id" position="after">
          <field name="use_scrum"/>
          </field>
        <xpath expr="//footer" position="before">
          <group>
            <field name="next_task_number"/>
          </group>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Kanban View -->
  <record model="ir.ui.view" id="project_enhancement_scrum_view_kanban">
    <field name="name">project.enhancement.scrum.kanban</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.view_project_kanban"/>
    <field name="arch" type="xml">
      <data>
        <xpath expr="//div[@class='o_primary']" position="after">
          <div>
            <field name="use_scrum" invisible="1"/>
            <t t-if="record.use_scrum.raw_value">
              <span class="o_label">Scrum Enabled</span>
            </t>
          </div>
        </xpath>
      </data>
    </field>
  </record>

  <!-- Search View -->
  <record model="ir.ui.view" id="project_enhancement_scrum_view_search">
    <field name="name">project.enhancements.scrum.filter</field>
    <field name="model">project.project</field>
    <field name="inherit_id" ref="project.view_project_project_filter"/>
    <field name="arch" type="xml">
      <filter name="inactive" position="before">
        <filter string="Scrum Projects"
                name="scrum_projects"
                domain="[('use_scrum', '=', True)]"/>
        <separator/>
      </filter>
    </field>
  </record>

</odoo>
