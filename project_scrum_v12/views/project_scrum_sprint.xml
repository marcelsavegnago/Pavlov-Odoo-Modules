<odoo>
  <data>
    <!-- List View-->
    <record model="ir.ui.view" id="project_scrum_sprints_list_view">
      <field name="name">Sprint List</field>
      <field name="model">project.scrum_sprint</field>
      <field name="arch" type="xml">
        <tree default_order='start_date desc' decoration-success="status=='closed'">
          <field name="status"/>
          <field name="name"/>
          <field name="projects" widget="many2many_tags"/>
          <field name="scrum_teams" widget="many2many_tags"/>
          <field name="start_date"/>
          <field name="end_date"/>
          <field name="project_tasks"/>
          <field name="id"/>
        </tree>
      </field>
    </record>

    <!-- Form View -->
    <record model="ir.ui.view" id="project_scrum_sprint_form_view">
      <field name="name">Sprint Form</field>
      <field name="model">project.scrum_sprint</field>
      <field name="arch" type="xml">
        <form string="Sprint Form">
          <header>
            <button name="close_and_create_sprint" type="object" string="Close and New" attrs="{'invisible':['|',('status','=','closed'),('status','=','planning')]}"/>
            <button name="close_sprint" type="object" string="Close" attrs="{'invisible':['|',('status','=','closed'),('status','=','planning')]}"/>
            <field name="status" widget="statusbar" options="{'clickable': '1'}"/>
          </header>
          <sheet>
            <div class="oe_title">
              <label for="name" class="oe_edit_only" string="Name"/>
              <h1><field name="name"/></h1>
            </div>
            <group colspan="2" col="4">
              <field name="projects" widget="many2many_tags" domain="[('use_scrum','=',True)]"/>
              <field name="start_date"/>
              <field name="scrum_teams" widget="many2many_tags"/>
              <field name="end_date"/>
            </group>
            <group>
              <field name="goal"/>
            </group>
            <group string="Project Tasks">
             <field name="project_tasks" nolabel="1" widget="many2many" domain="[('project_id','in',projects),('sprint_id','=',False)]">
               <tree string="Project Tasks" editable="Top">
                 <field name="issue_type"/>
                 <field name="name"/>
                 <field name="project_id"/>
                 <field name="user_id"/>
                 <field name="story_point_estimate"/>
                 <field name="planned_hours" sum="Total Planned Hrs"/>
                 <field name="effective_hours" sum="Total Effective Hours"/>
                 <field name="remaining_hours" sum="Total Remaining Hrs"/>
                 <field name="stage_id"/>
                 <field name="tag_ids" widget="many2many_tags"/>
                 <field name="progress" widget="progressbar"/>
                 <button name="open_rec" string="Open" type="object"/>
               </tree>
             </field>
           </group>
           <button name="%(sprint_capacity_document_preview)d" string="Show Capacity Report" type="action"/>
           <button name="%(sprint_capacity_document)d" string="Print Capacity Report" type="action"/>
          </sheet>
        </form>
      </field>
    </record>

    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="project_scrum_sprint_action_window">
      <field name="name">Sprints</field>
      <field name="res_model">project.scrum_sprint</field>
      <field name="view_mode">tree,form</field>
    </record>

    <!-- Menu Items -->
    <menuitem
      name="Scrum"
      id="project_scrum_main_menu"
      parent="project.menu_main_pm"
      sequence="80"/>
      <menuitem
        name="Sprints"
        id="project_scrum_sprint_main_menu"
        parent="project_scrum_main_menu"
        sequence="10"
        action="project_scrum_sprint_action_window"/>

  </data>
</odoo>
