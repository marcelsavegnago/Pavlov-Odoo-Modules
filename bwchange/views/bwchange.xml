<odoo>
    <!-- List View -->
    <record model="ir.ui.view" id="bwchange_change_view_list">
      <field name="name">Bandwidth Changes</field>
      <field name="model">bwchange.change</field>
      <field name="arch" type="xml">
        <tree default_order='stage, partner_id'>
          <field name="stage"/>
          <field name="state"/>
          <field name="partner_id"/>
          <field name="name"/>
          <field name="description"/>
          <field name="create_date"/>
          <field name="user_id"/>
          <field name="circuit_id"/>
          <field name="contract_signed_date"/>
          <field name="verified_by"/>
          <field name="verified_date"/>
          <field name="filename" invisible="1" />
          <field name="final_document" filename="filename"/>
        </tree>
      </field>
    </record>

    <!-- Form View -->
    <record model="ir.ui.view" id="bwchange_change_view__form">
      <field name="name">Bandwidth Changes</field>
      <field name="model">bwchange.change</field>
      <field name="arch" type="xml">
        <form string="Bandwidth Change Form">
          <header>
            <button name="%(bwchange_document_preview)d"
                    string="Preview"
                    type="action"
                    class="oe_highlight"/>
            <button name="%(bwchange_document)d"
                    string="Print"
                    type="action"
                    class="oe_highlight"/>
            <field name="stage"
                   widget="statusbar"
                   clickable="True"
                   options="{'fold_field': 'fold'}" />
          </header>
          <sheet>
            <div class="oe_title">
              <label for="name" class="oe_edit_only" string="Name" />
              <h1><field name="name" /></h1>
            </div>
            <group colspan="2" col="4">
              <field name="partner_id"/>
              <field name="user_id"/>
              <field name="priority"
                     widget="priority"/>
              <field name="eta"/>
            </group>
            <group>
              <field name="description"/>
            </group>
            <group colspan="2" col="4" string="Circuit Details">
              <field name="actual_transport"
                     widget="integer"/>
              <field name="circuit_landdate"/>
              <field name="circuit_paid_by"
                     widget="selection"/>
              <field name="circuit_id"/>
              <field name="sold_transport"
                     widget="integer"/>
              <field name="dia_upload"
                     widget="integer" />
              <field name="tesseractive_service"/>
              <field name="tesseractiv_speed"
                     attrs="{'invisible': [('tesseractive_service', '=', False)]}"
                     widget="integer"/>
              <field name="websnap"/>
            </group>
            <group colspan="2" col="4" string="Current Equipment (Filled by NOC)">
              <field name="router"
                     widget="selection"/>
              <field name="mikrotik"
                     widget="selection"/>
              <field name="core_switch"
                     widget="selection"/>
              <field name="distro_switch"
                     widget="selection"/>
              <field name="user_switch"/>
              <field name="trunked"/>
              <field name="qtree_type"/>
              <field name="needs_update"/>
              <field name="verified_by"/>
              <field name="verified_date"/>
            </group>
            <group>
              <field name="additional_information"/>
            </group>
            <group colspan="2" col="4" string="Experience (Contracted Info)">
              <field name="package_download"
                     widget="integer"/>
              <field name="websnap_download"
                     attrs="{'invisible': [('websnap', '=', False)]}"
                    widget="integer"/>
              <field name="package_upload"
                     widget="integer"/>
              <field name="unregistered_websnap"
                     attrs="{'invisible': [('websnap', '=', False)]}"
                    widget="integer"/>
              <field name="unregistered_download"
                     widget="integer"/>
              <field name="unregistered_tesseractiv"
                     attrs="{'invisible': [('tesseractive_service', '=', False)]}"
                     widget="integer"/>
              <field name="unregistered_upload"
                     widget="integer"/>
            </group>
            <group>
              <field name="reason_for_change"/>
            </group>
            <group colspan="2" col="4" string="Contract Information">
              <field name="contract_signed_date"/>
            </group>
            <group colspan="2" col="2" string="Implentation Information">
                <field name="implemented_by"/>
                <field name="implementation_notes"/>
            </group>
            <field name="filename" invisible="1" />
            <field name="final_document"
                   filename="filename"
                   widget="binary"/>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids"
                   widget="mail_followers"/>
            <field name="message_ids"
                   widget="mail_thread"/>
          </div>
        </form>
      </field>
    </record>

    <!-- Search View -->
    <record model="ir.ui.view" id="bwchange_change_view_search">
      <field name="name">Bandwidth Changes</field>
      <field name="model">bwchange.change</field>
      <field name="arch" type="xml">
        <search>
          <field name="name"/>
          <field name="description"/>
          <field name="partner_id"/>
          <field name="user_id"/>
          <field name="state"/>
          <filter string="My BW Changes"
                  domain="[('user_id','=',uid)]"
                  name="my_bwchanges"/>
          <separator/>
          <filter string="Unassigned"
                  domain="[('user_id','=',False)]"
                  name="unassigned_bwchanges"/>
          <separator/>
          <filter string="Draft"
                  domain="[('state','=','draft')]"
                  name="open_bwchanges"/>
          <filter string="Active"
                  domain="[('state','=','active')]"
                  name="active_bwchanges"/>
          <filter string="Inactive"
                  domain="[('state','=','inactive')]"
                  name="inactive_bwchanges"/>
          <group expand="0" string="Group By">
              <filter string="Assignee"
                      name="assigned_to"
                      context="{'group_by':'user_id'}"/>
              <filter string="Partner"
                      name="partner_id"
                      context="{'group_by':'partner_id'}"/>
              <filter string="Stage"
                      name="stage"
                      context="{'group_by':'stage'}"/>
              <filter string="State"
                      name="state"
                      context="{'group_by':'state'}"/>
          </group>
        </search>
      </field>
    </record>

    <!-- KanBan View -->
    <record model="ir.ui.view" id="bwchange_change_view_kanban">
      <field name="name">Bandwidth Changes</field>
      <field name="model">bwchange.change</field>
      <field name="arch" type="xml">
        <kanban default_group_by="stage">
          <field name="color"/>
          <field name="user_id"/>
          <field name="circuit_landdate"/>
          <field name="circuit_id"/>
          <field name="eta"/>
          <field name="state"/>
          <templates>
            <t t-name="kanban-box">
              <div t-attf-class="oe_kanban_color_{{kanban_getcolor(record.color.raw_value)}} oe_kanban_global_click oe_semantic_html_override oe_kanban_card {{record.group_fancy==1 ? 'oe_kanban_card_fancy' : ''}}">
                <div class="oe_kanban_content">
                  <div class="o_kanban_record_top">
                    <div class="o_kanban_record_headings">
                      <strong class="o_kanban_record_title"><field name="partner_id"/></strong><br/>
                      <small class="o_kanban_record_subtitle text-muted">
                        <field name="name"/>
                      </small>
                    </div>
                    <div class="o_dropdown_kanban dropdown" groups="base.group_user">
                      <a role="button"
                        class="dropdown-toggle o-no-caret btn"
                        data-toggle="dropdown" href="#"
                        aria-label="Dropdown menu"
                        title="Dropdown menu">
                        <span class="fa fa-ellipsis-v"/>
                      </a>
                      <div class="dropdown-menu" role="menu">
                        <a t-if="widget.editable"
                           role="menuitem"
                           type="edit"
                           class="dropdown-item">Edit BW Change</a>
                        <div role="separator" class="dropdown-divider"/>
                        <ul class="oe_kanban_colorpicker" data-field="color"/>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="o_kanban_record_body">
                  <field name="state"/>
                  <t t-if="record.eta.value and !record.circuit_landdate.value">
                    <div>ETA: <field name="eta"/></div>
                  </t>
                  <t t-if="record.circuit_id.value">
                    <div>Circuit ID: <field name="circuit_id"/></div>
                  </t>
                  <t t-if="record.circuit_landdate.value">
                    <div>Circuit Landed Date: <field name="circuit_landdate"/></div>
                  </t>
                </div>
                <div class="o_kanban_record_bottom">
                  <div class="oe_kanban_bottom_left">
                    <field name="priority"
                           widget="priority"
                           groups="base.group_user"/>
                  </div>
                  <div class="oe_kanban_bottom_right">
                    <img t-att-src="kanban_image('res.users', 'image_small', record.user_id.raw_value)" t-att-title="record.user_id.value" t-att-alt="record.user_id.value" width="24" height="24" class="oe_kanban_avatar"/>
                  </div>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="bwchange_change_action">
      <field name="name">Bandwidth Changes</field>
      <field name="res_model">bwchange.change</field>
      <field name="view_mode">kanban,tree,form</field>
    </record>

    <!-- ########################### MENU ITEMS ############################### -->
    <!-- Top menu item -->
    <menuitem
      name="BW Changes"
      id="bwchange_root_menu"
      web_icon="bwchange,static/description/icon.png"
      sequence="51"/>

      <!-- menu categories -->
      <menuitem
        name="Bandwidth Changes"
        id="bwchange_change_menu"
        parent="bwchange_root_menu"
        sequence="10"
        action="bwchange_change_action"/>

      <menuitem
        name="Configuration"
        id="bwchange_change_configuration_menu"
        sequence="20"
        parent="bwchange_root_menu"/>
</odoo>
